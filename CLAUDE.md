# Claude Configuration - 비바빌리지 학급 경제 플랫폼

이 파일은 비바빌리지 SEC(Small Economy in the Classroom) 기반 학급 경제 운영 웹 플랫폼 개발을 위한 Claude Code 설정입니다.

## 프로젝트 개요
- SEC 프로그램 기반 초등 학급 경제 운영 웹 플랫폼
- React + TypeScript + Vite + TailwindCSS (Frontend)
- Node.js + Express + TypeORM + PostgreSQL (Backend)
- MVP 버전으로 로컬에서 작동하는 교육용 플랫폼

## 개발 명령어

### 프론트엔드만 사용 (백엔드 미사용)
```bash
cd vivaa-town/client
npm run dev    # http://localhost:6100
npm run build  # 프로덕션 빌드
npm run lint   # ESLint 실행
```

**현재 개발 방침**: 백엔드는 사용하지 않고 프론트엔드만으로 개발 진행
- Mock 데이터 또는 로컬 스토리지 활용
- 추후 필요시 백엔드 연동 예정

### 백엔드 (향후 사용 예정)
```bash
cd vivaa-town/server
npm run dev    # http://localhost:7001 (현재 미사용)
npm run build  # TypeScript 컴파일
npm run start  # 프로덕션 실행
```

## 현재 구현 상태

### ✅ 완료된 기능 (2025.09.23 기준)
- 프로젝트 구조 설정 (React + Express)
- 기본 라우팅 구성 (Home, Classes, Students, Jobs, Transactions, Banking, Stocks, Achievements)
- TypeORM 엔티티 설계 (Class, User)
- 기본 서버 API 엔드포인트 (/health, /test)
- TailwindCSS 설정
- **Zustand 기반 상태 관리 시스템**
- **학급 생성/관리 시스템**
- **학생 관리 시스템 (CRUD)**
- **직업 관리 시스템 (CRUD)**
- **실시간 대시보드** (차트, 거래 피드, 경제 지표)
- **실시간 알림 시스템** (토스트, 이벤트 알림)
- **고급 급여 시스템** (일괄 지급, 세금 공제, 급여 명세서)
- **신용등급 시스템** (신용점수, 신용등급, 예금이자 우대, 행동 관리)
- **🏦 예금/적금 시스템** (정기예금, 자유적금, 복리 이자 계산)
- **📈 주식 투자 시스템** (실시간 차트, 포트폴리오, 수익률 계산)
- **🏆 업적/뱃지 시스템** (32종 업적, 4단계 등급)
- **📰 시장 뉴스 시스템** (주가 알림, 시장 동향)
- **🔍 교사용 분석 대시보드** (경제 지표, 활동 히트맵, 거래 패턴)
- **🏠 홈 화면 통합 대시보드** (탭 기반 분석 인터페이스)
- **🎮 종합 시연용 데이터** (15명 학생, 8개 주식, 30일 거래 데이터)

### 💳 새로 구현된 신용등급 시스템
- **신용점수**: 300~850점 미국식 신용점수 체계 적용
- **신용등급**: A+부터 D까지 7단계 등급 시스템
- **예금이자 우대**: 신용점수에 따른 이자율 차등 적용 (1.5%~5%)
- **행동 관리**: 교사가 지각, 숙제미제출, 도서연체 등 수동 차감 가능
- **리더보드**: 신용점수와 총수익 기준 실시간 랭킹
- **자동 점수 관리**: 거래 활동 시 점수 상승, 업적 달성 보너스

### 🚧 진행 중/미완성
- 📄 **월간 경제 활동 보고서 및 학기말 포트폴리오 자동 생성 (PDF)** ⬅️ 현재 작업 중
- 💳 **학생용 디지털 지갑 UI** (카드 플립 애니메이션, 3D 효과)
- 📱 **학생 전용 페이지 및 QR코드 거래 시스템**
- 🎨 **UI/UX 개선** (애니메이션, 아이콘, 색상 테마 최적화)

### ⏸️ 보류된 기능 (백엔드 관련)
- PostgreSQL 데이터베이스 연결
- JWT 인증 시스템
- 실제 API 구현 (CRUD)

## 🌐 웹 배포 정보

### GitHub Pages 배포
- **저장소**: https://github.com/suhmieum/sec
- **웹사이트**: https://suhmieum.github.io/sec/
- **배포 방식**: main 브랜치 루트 디렉토리에서 자동 배포
- **빌드 설정**: Vite 빌드 결과물을 프로젝트 루트로 복사

### 배포 명령어
```bash
# GitHub에 변경사항 업데이트 후 자동 배포
cd sec-project
git add .
git commit -m "Update website"
git push origin main
```

## 데이터 모델 (Zustand Stores)

### Classroom Store
- 학급 기본 정보 (name, currencyUnit, treasury, donation)
- 설정 옵션 (taxRate, payCycle, approvalRequired, salaryBase)
- CRUD 작업 (생성, 수정, 삭제, 조회)

### Student Store
- 학생 기본 정보 (name, pin4, balance, active)
- **신용등급 데이터** (creditScore, creditGrade, totalEarnings, totalTransactions, achievements)
- **행동 기록** (lateCount, homeworkMissed, bookOverdue)
- 잔고 관리 (입금, 출금, 이체)
- 직업 할당 및 PIN 관리
- **신용점수 & 업적 시스템** (점수 계산, 등급 변환, 이자율 계산, 랭킹)

### Job Store
- 직업 정보 (title, description, salary, maxPositions, currentPositions)
- 직업 할당 관리
- CRUD 작업

### App Store
- 전역 상태 (currentClassId, lastLogin)
- 앱 초기화 및 설정

## 주요 기능 요구사항 (PRD 기반)

### 교사용 기능
- 학급 경제 개설/관리
- 직업 및 급여 시스템
- 아이템 상점 운영
- 은행 상품 관리
- 세금 및 국고 관리
- 경제 지표 모니터링

### 학생용 기능
- 개인 통장 관리
- 직업 활동 및 급여 수령
- 아이템 구매/거래
- 예금 및 대출
- 주식 투자
- 창업 활동

## Git 커밋 가이드
- feat: 새로운 기능 추가
- fix: 버그 수정
- docs: 문서 수정
- style: 코드 스타일 변경
- refactor: 코드 리팩토링
- test: 테스트 코드 추가/수정

## 개발 우선순위 (프론트엔드 중심)
1. ✅ 프론트엔드 개발 환경 구성 (완료)
2. ✅ Zustand 상태 관리 시스템 구축 (완료)
3. ✅ 학급 생성/관리 UI 구현 (완료)
4. ✅ 학생 등록/관리 UI 구현 (완료)
5. ✅ 직업 관리 시스템 구현 (완료)
6. ✅ 실시간 대시보드 & 알림 시스템 (완료)
7. ✅ 고급 급여 시스템 (세금, 급여명세서) (완료)
8. ✅ 신용등급 시스템 (신용점수, 등급, 이자우대, 행동관리) (완료)
9. 🚧 가상 화폐 디자인 & 디지털 지갑
10. 🚧 교사용 분석 대시보드
11. 🚧 출석/수업 태도 모니터링
12. 🚧 UI/UX 개선 (애니메이션, 테마)

## 기술 스택 & 아키텍처

### 프론트엔드
- **React 18** + **TypeScript** + **Vite**
- **TailwindCSS** (스타일링) + **@tailwindcss/postcss** (PostCSS 플러그인)
- **Zustand** (상태 관리) + **Zod** (스키마 검증)
- **Framer Motion** (애니메이션)
- **React CountUp** (숫자 애니메이션)
- **Chart.js** + **react-chartjs-2** (차트 라이브러리)
- **React Hook Form** (폼 관리)
- **jsPDF** + **html2canvas** + **jspdf-autotable** (PDF 생성)
- **UUID** (고유 ID 생성)

### 상태 관리 패턴
- **Zustand Stores**: 분리된 스토어 (App, Classroom, Student, Job, Stock, Savings, Achievement, Analytics, Market)
- **LocalStorage 어댑터**: 데이터 영속성
- **Schema 검증**: Zod를 통한 타입 안전성
- **옵티미스틱 업데이트**: 즉시 UI 반영
- **실시간 계산**: 경제 지표, 포트폴리오 수익률, 이자 계산

### 컴포넌트 구조
```
src/
├── components/           # 재사용 컴포넌트
│   ├── Dashboard.tsx    # 실시간 대시보드 (분석 탭 통합)
│   ├── Leaderboard.tsx  # 게이미피케이션 리더보드
│   └── NotificationSystem.tsx # 알림 시스템
├── pages/               # 페이지 컴포넌트
│   ├── Classes.tsx      # 학급 관리 (시연 데이터 생성)
│   ├── Students.tsx     # 학생 관리 (급여 시스템 포함)
│   ├── Jobs.tsx         # 직업 관리
│   ├── Transactions.tsx # 거래 내역
│   ├── Banking.tsx      # 예금/적금 시스템
│   ├── Stocks.tsx       # 주식 투자 (차트, 뉴스, 포트폴리오)
│   ├── Achievements.tsx # 업적/뱃지 시스템
│   ├── Analytics.tsx    # 교사용 분석 대시보드
│   └── Items.tsx        # 아이템 상점
├── state/               # Zustand 스토어 (9개 스토어)
├── schemas/             # Zod 스키마
├── utils/               # 유틸리티 함수 (generateDemoData.ts)
└── storage/             # 스토리지 어댑터
```

## 백엔드 연동 (향후 계획)
1. PostgreSQL 연결 및 기본 CRUD API
2. 인증 시스템 (JWT)
3. 프론트엔드-백엔드 통합

## 최근 업데이트 (2025.09.24)
### 🎨 브랜딩 및 UX 개선 (2025.09.24)
- 🏷️ **비바타운 → 비바빌리지 리브랜딩** (전체 UI/타이틀 변경)
- 🎯 **사이드바 로고 간소화** (타운 아이콘 제거, 심플 텍스트 로고)
- 🚀 **최초 진입 UX 개선** (학급 없으면 자동 학급 관리 페이지 이동)
- 💡 **빠른 시작 팁 UI 단순화** (명확한 시연용 학급 생성 안내)
- ⏳ **시연용 학급 생성 로딩 스피너** (생성 진행 상황 시각화)
- ⚡ **활동 히트맵 성능 최적화** (데이터량 73% 감소: 2,520개→690개)
- 🎨 **홈 화면 시간 표시 폰트 개선** (Pretendard 폰트 적용)
- 📋 **학생 관리 UI 개선** (보기 모드 토글 우측 정렬)

### 💻 기술적 개선
- **성능 최적화**: 활동 히트맵 데이터 생성 로직 개선
- **코드 품질**: 타입 안전성 및 에러 처리 강화
- **배포 자동화**: GitHub Pages 배포 프로세스 개선

### 🌐 이전 업데이트 (2025.09.23)
- 🏦 **예금/적금 시스템 완전 구현** (정기예금, 적금, 이자 계산)
- 📈 **주식 투자 시스템 구현** (실시간 차트, 포트폴리오, 거래 내역)
- 🏆 **업적/뱃지 시스템 구현** (거래, 저축, 투자, 리더십 업적)
- 📊 **주식 차트 시각화 및 뉴스 시스템** (Chart.js 기반)
- 📰 **실시간 시장 뉴스 시스템** (주가 변동 알림)
- 🔍 **교사용 분석 대시보드** (경제 활동 히트맵, 경제 건전성 지표)
- 🏠 **홈 화면 분석 대시보드 통합** (전체 개요, 활동 히트맵, 거래 패턴)
- 🎮 **시연용 종합 데이터 생성** (15명 학생, 8개 주식, 30일 거래 데이터)
- 🐛 **JSX 문법 오류 및 TailwindCSS 설정 문제 해결**
- 🌐 **GitHub Pages 웹 배포 완료** (https://suhmieum.github.io/sec/)

### 🏛️ 새로 구현된 금융 시스템
- **예금/적금**: 정기예금 3/6/12개월, 자유적금, 실시간 이자 계산
- **주식 투자**: 4개 섹터(환경/교육/기술/식품) 8종목, 실시간 차트
- **포트폴리오**: 수익률 계산, 거래 내역, 배당금 시뮬레이션
- **업적 시스템**: 32가지 업적, 브론즈/실버/골드/플래티넘 등급
- **시장 뉴스**: 주가 변동 알림, 시장 동향 분석

### 📊 분석 대시보드 기능
- **경제 지표**: 지니계수, 인플레이션율, 시장참여율, 저축률, 고용률
- **활동 히트맵**: 학생별 요일/시간대 활동 패턴 분석
- **거래 패턴**: 매수/매도 비율, 거래 스타일 분석, 피크 시간대
- **위험 학생 식별**: 경제적 위험 요소 자동 감지
- **트렌드 예측**: 경제 성장/안정/하락 예측 모델

### 🎯 시연 데이터 현황
- **학생**: 15명 (다양한 경제 활동 패턴)
- **직업**: 7개 (월급 80~180 비바코인)
- **주식**: 8종목 (30일 가격 변동 데이터)
- **거래**: 실제적인 매수/매도 패턴
- **예금/적금**: 다양한 상품 가입 내역
- **업적**: 모든 카테고리별 달성 현황
- **활동 히트맵**: 690개 레코드 (주중 수업시간 + 주말 대표시간)

### ⚡ 성능 개선 사항
- **로딩 시간**: 시연용 학급 생성 시간 2-3초 단축
- **데이터 최적화**: 활동 히트맵 73% 경량화
- **사용자 경험**: 로딩 스피너 및 진행 상태 표시